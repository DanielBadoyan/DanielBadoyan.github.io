<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Portfolio - Systèmes d'Information</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <h1>Portfolio - Systèmes d'Information</h1>
        <p>Mon nom - Année Universitaire 2025-2026</p>
    </header>

    <nav>
        <div class="dropdown">
            <button id="menu-button" class="dropbtn">Choisir un TD</button>
            <div id="myDropdown" class="dropdown-content">
                <a href="#" data-td="td1">TD 1 - Introduction</a>
                <a href="#" data-td="td2">TD 2 - Modélisation</a>
                <a href="#" data-td="td3">TD 3 - Bases de Données</a>
                <a href="#" data-td="td4">TD 4 - ...</a>
                <a href="#" data-td="td5">TD 5 - ...</a>
                <a href="#" data-td="td6">TD 6 - ...</a>
                <a href="#" data-td="td7">TD 7 - ...</a>
            </div>
        </div>
    </nav>

    <div id="submenu-container">
        <div id="td1-files" class="submenu">
            <button class="pdf-button" data-src="pdfs/td1/cours.pdf">cours.pdf</button>
            <button class="pdf-button" data-src="pdfs/td1/exercice.pdf">exercice.pdf</button>
        </div>

        <div id="td2-files" class="submenu">
            <button class="pdf-button" data-src="pdfs/td2/sujet.pdf">sujet.pdf</button>
            <button class="pdf-button" data-src="pdfs/td2/correction.pdf">correction.pdf</button>
            <button class="pdf-button" data-src="pdfs/td2/annexe.pdf">annexe.pdf</button>
        </div>

        <div id="td3-files" class="submenu">
             </div>
    </div>


    <main>
        <div id="pdf-viewer-container">
            <p id="default-text">Sélectionnez un TD puis un document pour commencer.</p>
            <iframe id="pdf-viewer" src="" frameborder="0"></iframe>
        </div>
    </main>

    <script>
        const menuButton = document.getElementById('menu-button');
        const dropdown = document.getElementById('myDropdown');
        
        menuButton.onclick = function() {
            dropdown.classList.toggle('show');
        };

        window.onclick = function(event) {
            if (!event.target.matches('.dropbtn')) {
                if (dropdown.classList.contains('show')) {
                    dropdown.classList.remove('show');
                }
            }
        };

        const tdLinks = document.querySelectorAll('.dropdown-content a');
        const submenus = document.querySelectorAll('.submenu');

        tdLinks.forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault();
                const tdId = this.getAttribute('data-td');
                const targetSubmenu = document.getElementById(tdId + '-files');

                // Si on clique sur le TD déjà actif, on le cache. Sinon, on l'affiche.
                const isAlreadyActive = targetSubmenu && targetSubmenu.classList.contains('active-submenu');
                submenus.forEach(menu => menu.classList.remove('active-submenu'));
                if (!isAlreadyActive && targetSubmenu) {
                    targetSubmenu.classList.add('active-submenu');
                }
                
                dropdown.classList.remove('show');
            });
        });

        const pdfButtons = document.querySelectorAll('.pdf-button');
        const pdfViewer = document.getElementById('pdf-viewer');
        const defaultText = document.getElementById('default-text');

        pdfButtons.forEach(button => {
            button.addEventListener('click', function() {
                const pdfSrc = this.getAttribute('data-src');
                pdfViewer.src = pdfSrc;
                defaultText.style.display = 'none';
                pdfViewer.style.display = 'block';
            });
        });
    </script>

</body>
</html>
