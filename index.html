<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEXUS | Portfolio SI</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Syncopate:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="cursor cursor-small"></div>
    <div class="cursor cursor-large"></div>

    <canvas id="fluid-canvas"></canvas>

    <div class="ui-wrapper">
        <header class="hero-header">
            <h1 class="glitch-text" data-text="PORTFOLIO SI">PORTFOLIO SI</h1>
            <div class="subtitle-container">
                <p class="subtitle">ANNÉE UNIVERSITAIRE 2025-2026</p>
                <div class="subtitle-line"></div>
            </div>
        </header>

        <nav class="nav-container">
            <div class="dropdown nexus-glass">
                <button id="menu-button" class="dropbtn nexus-button">
                    <span class="btn-text">INITIALISER L'EXPLORATION</span>
                    <span class="btn-glare"></span>
                </button>
                <div id="myDropdown" class="dropdown-content nexus-glass-panel">
                    <a href="#" data-td="cours1"><span class="link-num">01.</span> Intro & PGI</a>
                    <a href="#" data-td="cours2"><span class="link-num">02.</span> Odoo Modél.</a>
                    <a href="#" data-td="cours3"><span class="link-num">03.</span> Dossiers & Schémas</a>
                    <a href="#" data-td="cours4"><span class="link-num">04.</span> Les Livrables</a>
                    <a href="#" data-td="cours5"><span class="link-num">05.</span> Gantt & MCD</a>
                    <a href="#" data-td="cours6"><span class="link-num">06.</span> Diagrammes UML</a>
                    <a href="#" data-td="cours7"><span class="link-num">07.</span> Données Futures</a>
                </div>
            </div>
        </nav>

        <div id="submenu-container">
            <div id="cours1-files" class="submenu">
                <button class="pdf-button nexus-file" data-src="pdfs/cours1/td_exercice_tableur.pdf">td_exercice_tableur.pdf</button>
                <button class="pdf-button nexus-file" data-src="pdfs/cours1/td_PGI_exercice.pdf">td_PGI_exercice.pdf</button>
                <button class="pdf-button nexus-file" data-src="pdfs/cours1/TD1_SI.pdf">TD1_SI.pdf</button>
            </div>
            <div id="cours2-files" class="submenu">
                <button class="pdf-button nexus-file" data-src="pdfs/cours2/TP_Odoo.pdf">TP_Odoo.pdf</button>
                <button class="pdf-button nexus-file" data-src="pdfs/cours2/TD2_si.pdf">TD2_si.pdf</button>
            </div>
             <div id="cours3-files" class="submenu">
                <button class="pdf-button nexus-file" data-src="pdfs/cours3/dossier_3.pdf">dossier_3.pdf</button>
                <button class="pdf-button nexus-file" data-src="pdfs/cours3/schema_td_si.pdf">schema_td_si.pdf</button>
            </div>
            </div>

        <main>
            <div id="pdf-viewer-container" class="nexus-terminal">
                <div class="terminal-header">
                    <span class="status-dot"></span>
                    <span class="terminal-title">TERMINAL DE VISIONNAGE QUANTIQUE v4.0</span>
                </div>
                <div class="viewer-content">
                     <p id="default-text">EN ATTENTE DE SÉLECTION DE DONNÉES...</p>
                    <iframe id="pdf-viewer" src="" frameborder="0"></iframe>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/PavelDoGreat/WebGL-Fluid-Simulation@master/script.js"></script>

    <script>
        // --- CONFIGURATION DU FLUIDE WEBGL ---
        // On force des couleurs spécifiques pour correspondre au nouveau thème
        window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) }; ga.l = +new Date;
        // Configuration des couleurs du fluide (Bleu électrique, Vert émeraude, Cyan)
        config = { 
            IMMEDIATE: true,
            TRIGGER: 'hover',
            SIM_RESOLUTION: 256,
            DYE_RESOLUTION: 1024,
            CAPTURE_RESOLUTION: 512,
            DENSITY_DISSIPATION: 1,
            VELOCITY_DISSIPATION: 0.2,
            PRESSURE: 0.8,
            PRESSURE_ITERATIONS: 20,
            CURL: 30,
            SPLAT_RADIUS: 0.25,
            SPLAT_FORCE: 6000,
            SHADING: true,
            COLORFUL: false, // On désactive le multicolore aléatoire
            COLOR_UPDATE_SPEED: 10,
            PAUSED: false,
            BACK_COLOR: { r: 5, g: 10, b: 20 }, // Fond bleu nuit très sombre
            TRANSPARENT: false,
            BLOOM: true,
            BLOOM_ITERATIONS: 8,
            BLOOM_RESOLUTION: 256,
            BLOOM_INTENSITY: 0.8,
            BLOOM_THRESHOLD: 0.6,
            BLOOM_SOFT_KNEE: 0.7,
            SUNRAYS: true,
            SUNRAYS_RESOLUTION: 196,
            SUNRAYS_WEIGHT: 1.0,
        }
        // Injection de nos couleurs personnalisées dans le moteur fluide
        function customColors() {
            // Palette: Cyan Électrique, Bleu Profond, Vert Cyber
            return [
                {r: 0, g: 220, b: 255}, // Cyan
                {r: 30, g: 50, b: 200}, // Deep Blue
                {r: 0, g: 255, b: 150}  // Cyber Green
            ][Math.floor(Math.random() * 3)];
        }
        // On surcharge la fonction de couleur du script externe
        if(typeof updateKeywords === 'function') {
             let originalGetColor = generateColor;
             generateColor = customColors;
        }

        // --- ANIMATIONS D'ENTRÉE AVEC GSAP ---
        window.addEventListener('load', () => {
            const tl = gsap.timeline();
            tl.to('.glitch-text', { duration: 1.5, opacity: 1, letterSpacing: '5px', ease: "power4.out" })
              .to('.subtitle-line', { duration: 1, width: '100%', ease: "expo.out" }, "-=0.8")
              .to('.subtitle', { duration: 1, opacity: 1, translateY: 0, ease: "power3.out" }, "-=0.8")
              .to('.nexus-button', { duration: 1, opacity: 1, scale: 1, ease: "elastic.out(1, 0.5)" }, "-=0.5")
              .to('.nexus-terminal', { duration: 1.2, opacity: 1, translateY: 0, rotateX: 0, ease: "power3.out" }, "-=0.8");
        });

        // --- CURSEUR PERSONNALISÉ ---
        const cursorSmall = document.querySelector('.cursor-small');
        const cursorLarge = document.querySelector('.cursor-large');
        
        document.addEventListener('mousemove', (e) => {
            gsap.to(cursorSmall, { x: e.clientX, y: e.clientY, duration: 0.1 });
            gsap.to(cursorLarge, { x: e.clientX, y: e.clientY, duration: 0.5, ease: "power2.out" });
        });
        
        // Effet magnétique sur les éléments interactifs
        const interactives = document.querySelectorAll('a, button');
        interactives.forEach(el => {
            el.addEventListener('mouseenter', () => {
                gsap.to(cursorLarge, { scale: 3, backgroundColor: 'rgba(0, 255, 200, 0.1)', borderColor: 'transparent' });
                gsap.to(cursorSmall, { scale: 0 });
            });
            el.addEventListener('mouseleave', () => {
                 gsap.to(cursorLarge, { scale: 1, backgroundColor: 'transparent', borderColor: 'var(--neon-cyan)' });
                 gsap.to(cursorSmall, { scale: 1 });
            });
        });

        // --- LOGIQUE DU PORTFOLIO (Ton ancien script adapté) ---
        const menuButton = document.getElementById('menu-button');
        const dropdown = document.getElementById('myDropdown');
        menuButton.onclick = function() { dropdown.classList.toggle('show'); };
        window.onclick = function(event) {
            if (!event.target.closest('.dropbtn')) {
                if (dropdown.classList.contains('show')) { dropdown.classList.remove('show'); }
            }
        };
        const tdLinks = document.querySelectorAll('.dropdown-content a');
        const submenus = document.querySelectorAll('.submenu');
        tdLinks.forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault();
                const tdId = this.getAttribute('data-td');
                const targetSubmenu = document.getElementById(tdId + '-files');
                document.getElementById('default-text').style.display = 'block';
                document.getElementById('pdf-viewer').style.display = 'none';
                document.getElementById('pdf-viewer').src = "";
                const isAlreadyActive = targetSubmenu && targetSubmenu.classList.contains('active-submenu');
                submenus.forEach(menu => menu.classList.remove('active-submenu'));
                if (!isAlreadyActive && targetSubmenu) { 
                    targetSubmenu.classList.add('active-submenu');
                    // Animation GSAP pour l'apparition des fichiers
                    gsap.fromTo(targetSubmenu.children, 
                        { opacity: 0, y: 20, scale: 0.9 }, 
                        { opacity: 1, y: 0, scale: 1, duration: 0.4, stagger: 0.1, ease: "back.out(1.7)" }
                    );
                }
                dropdown.classList.remove('show');
            });
        });
        const pdfButtons = document.querySelectorAll('.pdf-button');
        const pdfViewer = document.getElementById('pdf-viewer');
        const defaultText = document.getElementById('default-text');
        pdfButtons.forEach(button => {
            button.addEventListener('click', function() {
                pdfButtons.forEach(btn => btn.classList.remove('active-btn'));
                this.classList.add('active-btn');
                const pdfSrc = this.getAttribute('data-src');
                pdfViewer.src = pdfSrc;
                defaultText.style.display = 'none';
                pdfViewer.style.display = 'block';
            });
        });
    </script>
</body>
</html>
